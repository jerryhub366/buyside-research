{{ if .IsPage }}

{{/* ─── Disclaimer ────────────────────────────────────────────────────────── */}}
{{ partial "disclaimer.html" . }}

{{/* ─── Waline Comments / Reactions / Page Views ─────────────────────────────
     After deploying Waline to Vercel:
       Replace WALINE_SERVER_URL with your Waline deployment URL
       e.g. https://your-waline.vercel.app
     ─────────────────────────────────────────────────────────────────────── */}}
<div id="waline-pageview-count" style="margin:1rem 0;font-size:0.85rem;color:var(--secondary,#666);">
  阅读量：<span class="waline-pageview-count" data-path="{{ .RelPermalink }}">--</span>
</div>

<div id="waline-comment" style="margin-top:2rem;"></div>

<link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css" />
<script type="module">
  import { init, pageviewCount } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

  // Page view counter (runs on all pages without initializing full comment widget)
  pageviewCount({
    serverURL: 'https://WALINE_SERVER_URL.vercel.app',
    path: window.location.pathname,
  });

  // Full Waline widget (comments + reactions)
  init({
    el: '#waline-comment',
    serverURL: 'https://WALINE_SERVER_URL.vercel.app',
    path: window.location.pathname,
    lang: 'zh-CN',
    reaction: true,
    comment: true,
    pageview: true,
    dark: 'html[data-theme="dark"]',
    emoji: [
      'https://unpkg.com/@waline/emojis@1.2.0/weibo',
      'https://unpkg.com/@waline/emojis@1.2.0/bilibili',
    ],
    locale: {
      reactionTitle: '你的评价',
      reaction0: '非常同意',
      reaction1: '基本同意',
      reaction2: '保持中立',
      reaction3: '有待商榷',
      reaction4: '强烈反对',
    },
  });
</script>

{{ end }}
